<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User</title>
</head>
<body>
    <div id="map"></div>
    <script>
        setInterval(repeat,10000);
function repeat(){
    var gb;
    var lat;
    var long;
    const channelId = '2013276';
const apiKey = '3UIYRI7DJR2557GL';
const url = `https://api.thingspeak.com/channels/${channelId}/feeds.json?api_key=${apiKey}`;

fetch(url)
  .then(response => response.json())
  .then(data => {
    console.log(data);
    gb = data;
    var li = gb['channel']['last_entry_id'];
    lat = Number(gb['feeds'][99]['field1']);
    long = Number(gb['feeds'][99]['field2']);
    console.log(li,lat,long);
    map.innerHTML = '<iframe width="700" height="300" src="https://maps.google.com/maps?q='+ lat +','+long+'&amp;z=15&amp;output=embed"></iframe>';
  })
  .catch(error => {
    console.error('Error:', error);
  }); 
  
}

    </script>
</body>
</html>